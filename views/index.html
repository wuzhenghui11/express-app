<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<title></title>
	<meta charset="UTF-8">
	<meta name=viewport content="width=device-width, initial-scale=1, user-scalable=no">
	<link rel="stylesheet" href="http://localhost:3007/assets/base.min.css" />
	<style type="text/css"></style>
</head>
<body>
	<div id="app" style="overflow: visible;">
		<pre style="min-width: 100%; white-space: pre-wrap; word-break: break-word;">
		</pre>
		<div>菜单</div>
		<!-- 粘性布局 -->
		<div style="position: sticky; top: 0; left: 0; right: 0; height: 20px; background-color: rgba(135, 128, 128, .3);"></div>
		<ul>
			<li v-for="(item, index) in urlList">
				<a :key="index" :href="item.url">{{ item.name }}</a>
			</li>
		</ul>
	</div>
	<script src="public/js/library/vue3.js" defer></script>
	<script src="public/js/qiankunMicro.js" entry></script>
	<script src="https://cdn.bootcss.com/vConsole/3.2.0/vconsole.min.js"></script>


	<script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js"></script>
	<script>
		function getIPs(callback){
			var ip_dups = {};

			var RTCPeerConnection = window.RTCPeerConnection
				|| window.mozRTCPeerConnection
				|| window.webkitRTCPeerConnection;
			
			console.log(RTCPeerConnection)

			if (!RTCPeerConnection) {
				callback([]);
				return;
			}

			var pc = new RTCPeerConnection({iceServers:[]}),
				noop = function(){};
			pc.createDataChannel("");    
			pc.createOffer(function(sdp) {
				console.log(sdp)
				sdp.sdp.split('\n').forEach(function(line) {   
					if (line.indexOf('candidate') < 0) return;   
					line.split(' ').forEach(function(part) {
						if (part.indexOf('192.168.') === 0 || part.indexOf('172.') === 0 || part.indexOf('10.') === 0) {
							if (!(part in ip_dups)) {
								ip_dups[part] = true;
							}
						}
					});
				});
				Object.keys(ip_dups).forEach(function(ip) {
					callback(ip);
				});
			}, noop); 
		}
		getIPs(function (ip) {
			console.log(ip)
		})

		function isWeixin () { // 判断是否是微信浏览器
			let ua = navigator.userAgent.toLowerCase()
			return ua.match(/MicroMessenger/i) === 'micromessenger'
		}
		wx.miniProgram.getEnv((res) => {
			if (res.miniprogram) {
				alert(JSON.stringify(res))
				alert(JSON.stringify(wx))
			}
		})
	</script>







	<script type="module">
		const { createApp, ref, onMounted } = Vue
		const app = createApp({
			setup (props, context) {
				const urlList = [
					{ url: 'http://localhost:3007/es6.html', name: 'es6', },
					{ url: 'http://localhost:3007/suiji.html', name: '随记', },
					{ url: 'http://localhost:3007/microMacro.html', name: 'microMacro', },
					{ url: 'http://localhost:3007/suanfa.html', name: '算法', },
					{ url: 'http://localhost:3007/indexdb.html', name: 'indexdb', },
					{ url: 'http://localhost:3007/clientHeight.html', name: '获取元素高度', },
					{ url: 'http://localhost:3007/errorObject.html', name: '错误对象', },
					{ url: 'http://localhost:3007/h5Download.html', name: 'h5Download', },
					{ url: 'http://localhost:3007/requestAnimationFrame.html', name: 'requestAnimationFrame', },
					{ url: 'http://localhost:3007/print.html', name: 'print', },
					{ url: 'http://localhost:3007/useRequire.html', name: 'useRequire', },
					{ url: 'http://localhost:3007/webSocket.html', name: 'webSocket', },
					{ url: 'http://localhost:3007/webWorker.html', name: 'webWorker', },
					{ url: 'http://localhost:3007/windowClose.html', name: '窗口关闭', },
				]
				function main () {
					// document.all 获得当前页面所有标签 console.log(!document.all)
					// 如果在模板字符串中需要使用反引号或反斜杠（\），则前面要用反斜杠转义 
					// console.log(`1\`\\d2`)
					/* const newObj = Object.create({
						a: 1
					})
					newObj.b = 2
					console.dir(newObj)
					console.log(newObj.b) */
				}
				onMounted(() => {
					main()
				})
				return {
					urlList,
				}
			}
		})
		app.mount('#app')
	</script>
</body>
</html>
