<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<title></title>
		<meta charset="UTF-8">
		<link rel="stylesheet" href="../public/css/style.min.css" />
		<!--[if lt ie 9]>
			<script src="js/lib/html5.min.js"></script> 
		<![endif]-->
		<script src="../public/js/lib/require.js"></script>
		<!-- 引入样式 -->
		<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
		<!-- 引入组件库 -->
	</head>

	<body>
		<div id="app">
			<p>{{ test }}</p>
			<button @click="handleClick">click</button>
			<!-- <button-counter></button-counter> -->
			<input type="file" name="myFile" @change="fileChange"></input>
		</div>
		<div id="list"></div>
		<script>
			require(['../public/js/common'], function() {
				require(['jquery', 'https://unpkg.com/axios/dist/axios.min.js', 'vue'], function($, axios, Vue) {
					require(['vuex'], function(Vuex, ele) {
						let obLength = {
							length: 3
						}
						function Oct() {
							console.log(arguments);
						}
						let ob = Object.create(Oct.prototype);
						console.dir(ob);
						let tArr = [];
						Oct.apply(ob, [tArr]);


						var Enum;
						(function (Enum) {
						    Enum[Enum["A"] = 0] = "A";
						})(Enum || (Enum = {}));
						// console.log(Enum);

						// 分治法
						// 快速排序
						// 归并排序
						// 快速傅立叶变换
						/* -片段- */
						Vue.component('button-counter', {
							data: function () {
								return {
									count: 0
								}
							},
							template: '<button v-on:click="count++">You clicked me {{ count }} times.</button>'
						});

						var vm = new Vue({
							el: '#app',
							data: {
								test: 11,
								hz: {
									ad: {
										奥迪: 123
									}
								}
							},
							methods: {
								handleClick() {
									this.test = 22;
								},
								createXMLHttpRequest() {
									let xhr;
									if (window.ActiveXObject) {
										xhr = new ActiveXObject('Microsoft.XMLHTTP');
									} else if (window.XMLHttpRequest) {
										xhr = new XMLHttpRequest();
									}
									return xhr;
								},
								testGetData() {
									let params = {
										test: '121',
										test2: [1, 2, 3]
									};
									/*axios.post('http://localhost:3000/postReq', {
										firstName: 'Fred',
										lastName: 'Flintstone'
									}).then(function (response) {
										console.log(response);
									}).catch(function (error) {
										console.log(error);
									});*/
									$.ajax({
										headers: {
											'Content-Type': 'application/json',
											'cache-control': 'no-cache'
										},
										url: 'http://localhost:3000/test/getData',
										dataType: 'JSON',
										type: 'POST',
										data: JSON.stringify(params),
										success: function(msg) {
										}
									});
								},
								fileChange(val) {
									console.log(val);
								}
							},
							created() {
								this.testGetData();
								console.log((!!this.hz && !!this.hz.ad));
							}
						});
						// vm.test = 'haha'; // 更新test
						// console.log(vm.$el.textContent); // 11

						// 在下次 DOM 更新循环结束之后执行延迟回调
						Vue.nextTick(function() {
							// console.log(vm.$el.textContent); // haha
						});

						/* -片段- */
						function W(a) {
							this.a = a;
						}
						W.prototype.deepCopy = function(obj) {
							var newObj = Array.isArray(obj) ? [] : {};
							for (var item in obj) {
								if (typeof obj[item] === "object" && obj[item] != null && !(obj[item] instanceof Date)) {
									newObj[item] = this.deepCopy(obj[item]);
								} else {
									newObj[item] = obj[item];
								}
							}
							return newObj;
						}
						W.prototype.printThis = function() {
							console.log(this);
						}
						W.test = function() {
							console.log(this);
						}
						var w = new W(1);
						var w2 = new W(2);
						let a = w.deepCopy({
							a: {
								b: 1
							}
						});
						// W.test();
						// w2.printThis();
						// w.printThis();
						
						/* -片段- */
						function debounce(fn, delay) {
							var timer = null;
							return function () {
								var context = this, args = arguments;
								clearTimeout(timer);
								timer = setTimeout(function() {
									fn.apply(context, args);
								}, delay);
							};
						}
						window.onresize = debounce(function(){
							// console.log(12);
						}, 250);

						/* -片段- */
						async function foo() {
							await new Promise((resolve) => {
								setTimeout(resolve, 3000);
							});
							console.log(123);
							await new Promise((resolve) => {
								setTimeout(resolve, 3000);
							});
							console.log(223);
							return;
						}
						foo().then(() => {
							// console.log(2);
						});

						/* -片段- */
						class Pc {
							constructor (x) {
								this.name = x;
								console.log(new.target.name);
							}
						}

						class Cc extends Pc {
							constructor (x, y) {
								super(x);
								this.y = y;
							}
						}
						// console.dir(Cc);

						/* -片段- */
						/*let r = /a\d/y; // 必须从剩余的第一个位置开始(成功)否则null lastIndex为0
						console.log('a1a2a3'.match(r)); // ["a1"]
						console.log('a1a2a3'.match(r)); // ["a2"]
						console.log('a1a2a3'.match(r)); // ["a3"]
						console.log('a1a2a3'.match(r)); // null	
						console.log('a1a2a3'.match(r)); // ["a1"]
						let gr = /a\d/g; // 从剩余的第一个位置开始 成功为止 否则null
						console.log('a1a2a3'.match(gr)); // ["a1", "a2", "a3"]
						console.log(gr.exec('a1a2a3')); // ["a1"]
						console.log(gr.exec('a1a2a3')); // ["a2"]*/

						/* -片段- */
						String.prototype.trimTest = function() {
							return this.replace(/^\s+|\s+$/, ' ');
						}
						// console.log(' test'.trimTest(););
						
						/* -片段- */
						function argumentsTest() {
							// console.log(Array.isArray(arguments));
							var oldArr = Array.prototype.slice.apply(arguments);
							for (var i = 0, len = oldArr.length; i < len; i++) {}
						}
						argumentsTest(1, 2, 3, 4, 5);

						/* -片段- */
						var sortArr = [1, 3, 5, 4, 9, 6, 2, 7, 8];
						for (let i = 0; i < sortArr.length; i++) {
							for (let l = 0; l < sortArr.length; l++) {
								if (sortArr[l] > sortArr[l + 1]) {
									let temp = sortArr[l];
									sortArr[l] = sortArr[l + 1];
									sortArr[l + 1] = temp;
								}
							}
						}

						/* -片段- */
						/*includes startsWith endsWith
						console.log('q'.padEnd(5, 'ab'));
						console.log('q'.padEnd(5, 'ab'));
						number trunc sign cbrt
						console.log(parseInt('321x123'));
						componentWillMount componentDidMount componentWillReceiveProps
						showComponentUpdate Unmount*/
						
						/* -片段- */
						var promise = new Promise((res, rej) => {
							res(11);
						});
						promise.then((value) => {
							// console.log(value);
						}).then((value) => {
						});

						/* -片段- */
						let strToArr = 'ABC';
						let sArr = [...strToArr];

						/* -片段- */
						(function() {
							for (var i = 0; i < 3; i++) {
								// 匿名函数会插入到主线程立即执行，并且匿名函数的参数(实参)已确定
								// 所以setTimeout的回调方法中i的作用域在匿名函数内，而不是全局
								(function (i) {
									setTimeout(function() {
										// console.log(i); // 0 1 2
									}, 10);
								})(i);
							}
							for (let i = 0; i < 3; i++) {
								setTimeout(function() {
									// console.log(i); // 由于let的原因 0 1 2
								}, 10);
							}
							for (var i = 0; i < 3; i++) {
								setTimeout(function() {
									// console.log(i); // 三个3
								}, 10);
							}
						})();
					});
				});
			});
		</script>
	</body>

</html>
