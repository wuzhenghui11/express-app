<!DOCTYPE html>
<html lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<meta name="keywords" content="关键字" />
<meta name="description" content="描述信息" />
<!-- <meta name="apple-mobile-web-app-capable" content="no" /> iphone safari中私有 禁止全屏模式浏览
<meta name="apple-mobile-web-app-status-bar-style" content="black" /> iphone safari中私有 指定顶端状态条的颜色有black（黑色）、default（默认白色）、black-translucent（灰色半透明），有效的前提是设置了apple-mobile-web-app-capable
<meta name="apple-itunes-app" content="app-id=872660154" /> iphone safari 中私有 判断是否有该App 有弹出框则显示“打开”否则先显示“显示” 弹出框时有时不有 -->
<!--<meta name="format-detection" content="telephone=no, email=no" /> 禁止将页面中的号码识别为电话号码和邮箱识别为邮箱-->
<title></title>
<!--[if lt ie 9]>
<script src="js/lib/html5.min.js"></script> 
<![endif]-->
<!-- 
<link href="images/web-icon.png" rel="apple-touch-icon-precomposed"/> iphone safari 中私有 分享“添加到桌面”的截图的桌面图片
<link href="Images/ioffice32x32.ico" type="image/x-icon" rel="shortcut icon"/> title中的小图标
-->
<link href="css/common.css" rel="stylesheet"/>

<!--
<script src="http://cdn.bootcss.com/es5-shim/4.3.1/es5-sham.min.js"></script>
<script src="http://cdn.bootcss.com/es5-shim/4.3.1/es5-shim.min.js"></script>
-->
</head>
<style type="text/css">
</style>
<body>
<!--
<script src="js/require-2.1.11.min.js"></script>
<script src="js/main.js"></script>
<script src="js/app/test.js"></script>
-->
<script>
(function(){
	var events = function(){
		var listen, obj, one, remove, trigger, __this;
		obj = {};
		__this = this;
		listen = function(key, eventfn){
			var stack, _ref;
			stack = (_ref = obj[key]) != null ? _ref : obj[key] = [];
			return stack.push(eventfn);
		};
		one = function(key, eventfn){
			remove(key);
			return listen(key,eventfn);
		};
		remove = function(key){
			var _ref;
			return (_ref = obj[key]) != null ? _ref.length = 0 : void 0;
		};
		trigger = function(){
			var fn, stack, _i, _len, _ref, key;
			key = Array.prototype.shift.call(arguments);
			alert(obj[key]);
			stack = (_ref = obj[key]) != null ? _ref : obj[key] = [];
			for(_i = 0, _len = stack.length; _i < _len; _i++){
				fn = stack[_i];
				if(fn.apply(__this, arguments) === false){
					return false;
				}
			}
		};
		return {
			listen: listen,
			one: one,
			remove: remove,
			trigger: trigger
		}
	}
	var eee = events();
	
	eee.listen("play", function(data){ //  观察者
		alert(data.name);
	});
	
	eee.trigger("play", {"name":"22"}); // 发布者
	/*var singleton = function(fn){
		var result;
		return function(){
			return result || (result = fn .apply(this, arguments));
		}
	}
	var createMask = singleton(function(){
		return document.body.appendChild(document.createElement('div'));
	});
	createMask();
	
	*/
	
	
	/*function A( name ){
		this.name = name;
	}
	function ObjectFactory(){
		var obj = {},
		Constructor = Array.prototype.shift.call( arguments );
		obj.__proto__ =  typeof Constructor.prototype === 'number' ? Object.prototype : Constructor.prototype;
		var ret = Constructor.apply( obj, arguments );
		return typeof ret === 'object' ? ret : obj;
	}
	var a = ObjectFactory( A, 'svenzeng' );
	alert(a.name);*/  //svenzeng
})();
</script>
</body>
</html>

